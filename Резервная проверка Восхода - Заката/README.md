# Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ’Ğ¾ÑÑ…Ğ¾Ğ´Ğ° - Ğ—Ğ°ĞºĞ°Ñ‚Ğ° (Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ Ñ…Ğ°Ğ±Ğ°)

## ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ
- Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğ¹ Ñ€Ğ°ÑÑ‡ĞµÑ‚ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ²Ğ¾ÑÑ…Ğ¾Ğ´Ğ°/Ğ·Ğ°ĞºĞ°Ñ‚Ğ° Ğ¿Ğ¾ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°Ğ¼
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ¶Ğ¸Ğ¼Ğ° Ğ´ĞµĞ½ÑŒ/Ğ½Ğ¾Ñ‡ÑŒ Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
- Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ĞµĞ¼ Ğ´ĞµĞ½ÑŒ/Ğ½Ğ¾Ñ‡ÑŒ
- Ğ£Ñ‡ĞµÑ‚ Ğ²Ñ‹ÑĞ¾Ñ‚Ñ‹ Ğ½Ğ°Ğ´ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¼ Ğ¼Ğ¾Ñ€Ñ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ½Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸

## ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
1. **Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹** - Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ°ÑÑ‚Ñ€Ğ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ñ‹
2. **Ğ‘Ğ»Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹** - ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸ Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ¾Ğ²

## ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸

### Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ)
```javascript
global.LAT = 55.60;     // Ğ¨Ğ¸Ñ€Ğ¾Ñ‚Ğ° Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ¼ĞµÑÑ‚Ğ¾Ğ¿Ğ¾Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
global.LNG = 37.52;     // Ğ”Ğ¾Ğ»Ğ³Ğ¾Ñ‚Ğ° 
global.TZ = 3;          // Ğ§Ğ°ÑĞ¾Ğ²Ğ¾Ğ¹ Ğ¿Ğ¾ÑÑ (UTC+3 Ğ´Ğ»Ñ ĞœĞ¾ÑĞºĞ²Ñ‹)
global.ELEVATION = 150; // Ğ’Ñ‹ÑĞ¾Ñ‚Ğ° Ğ½Ğ°Ğ´ ÑƒÑ€Ğ¾Ğ²Ğ½ĞµĞ¼ Ğ¼Ğ¾Ñ€Ñ (Ğ¼ĞµÑ‚Ñ€Ñ‹)
```

### ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ±Ğ»Ğ¾Ñ‡Ğ½Ğ¾Ğ³Ğ¾ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ
```javascript
var SWITCH_ID = 130;    // ID Ğ²Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»Ñ
var CHAR_ID = 15;       // ID Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ On/Off
```

## ĞšĞ°Ğº ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ

### 1. **Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹**:
   
   1. ĞŸĞµÑ€ĞµĞ¹Ğ´Ğ¸Ñ‚Ğµ Ğ² "Ğ¡Ñ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸" â†’ "Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ" â†’ "Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½"
   2. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚Ğµ Ñ„Ğ°Ğ¹Ğ» `(Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹) Ğ’Ğ¾ÑÑ…Ğ¾Ğ´ - Ğ—Ğ°ĞºĞ°Ñ‚ (Ğ¿Ğ¾ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ°Ğ¼ Ñ„Ğ¾Ñ€Ğ¼ÑƒĞ»Ğ¾Ğ¹ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ğ°).json`
   3. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ Ğ² ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸:
   - `global.LAT`
   - `global.LNG`
   - `global.TZ`
   - `global.ELEVATION`
   4. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸ Ğ¸ Ğ²ĞºĞ»ÑÑ‡Ğ¸ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ (Ğ½Ğ°Ğ¶Ğ¼Ğ¸ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "Play").

### 2. **Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ±Ğ»Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹**:

   1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ±Ğ»Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹
   2. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ»Ğ¾Ğº ĞºĞ¾Ğ´Ğ°
   3. Ğ’ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ°Ñ… ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ñ Ğ²ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğ·ÑƒĞ½Ğ¾Ğº "Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ½Ğ° ÑÑ‚Ğ°Ñ€Ñ‚Ğµ Ñ…Ğ°Ğ±Ğ°"
   4. Ğ’ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ ĞºĞ¾Ğ´ ÑÑ‚Ğ¾Ñ‚ ĞºĞ¾Ğ´:

```javascript
// ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
var SWITCH_ID = 8;     // Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ½Ğ° ID Ğ²Ğ°ÑˆĞµĞ³Ğ¾ Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»Ñ
var CHAR_ID = 15;      // Ğ—Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ğµ Ğ½Ğ° ID Ñ…Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸ On/Off

// ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ ÑĞ¾Ğ»Ğ½Ñ†Ğµ
var sunData = global.calculateSunTimes();
var isDayTime = sunData.isDayTime();

// Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»ĞµĞ¼
try {
    Hub.setCharacteristicValue(SWITCH_ID, CHAR_ID, isDayTime ? 1 : 0);
    log.info(
        (isDayTime ? "â˜€ï¸ Ğ”Ğ•ĞĞ¬ " : "ğŸŒ™ ĞĞĞ§Ğ¬ ") +
        "| Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: " + (isDayTime ? "Ğ’ĞšĞ›" : "Ğ’Ğ«ĞšĞ›") +
        " | Ğ’Ğ¾ÑÑ…Ğ¾Ğ´: " + sunData.sunrise + 
        " | Ğ—Ğ°ĞºĞ°Ñ‚: " + sunData.sunset
    );
} catch(e) {
    log.error("ĞÑˆĞ¸Ğ±ĞºĞ° ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ: " + e);
    // ĞĞ²Ğ°Ñ€Ğ¸Ğ¹Ğ½Ğ¾Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ (Ğ´Ğ½Ñ‘Ğ¼ = Ğ’ĞšĞ›, Ğ½Ğ¾Ñ‡ÑŒÑ = Ğ’Ğ«ĞšĞ›)
    var defaultState = (new Date().getHours() >= 6 && new Date().getHours() < 18);
    Hub.setCharacteristicValue(SWITCH_ID, CHAR_ID, defaultState ? 1 : 0);
}
```

   5. Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ `SWITCH_ID` Ğ¸ `CHAR_ID`
   6. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸ Ğ¸ Ğ²ĞºĞ»ÑÑ‡Ğ¸ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹ (Ğ½Ğ°Ğ¶Ğ¼Ğ¸ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ "Play").

## ĞšĞ°Ğº Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ
1. **Ğ¢ĞµÑÑ‚ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ¾Ğ²**:
   ```javascript
   global.testSunCalc(); // ĞŸĞ¾ĞºĞ°Ğ¶ĞµÑ‚ Ğ² Ğ»Ğ¾Ğ³Ğ°Ñ…:
   // "Ğ’Ğ¾ÑÑ…Ğ¾Ğ´ 06:45:00, Ğ—Ğ°ĞºĞ°Ñ‚ 18:30:00, Ğ¡ĞµĞ¹Ñ‡Ğ°Ñ â˜€ï¸ Ğ”ĞµĞ½ÑŒ"
   ```

2. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°**:
   - ĞŸĞ¾ÑĞ»Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ²Ñ‹ĞºĞ»ÑÑ‡Ğ°Ñ‚ĞµĞ»Ñ
   - Ğ’ Ğ»Ğ¾Ğ³Ğ°Ñ… Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ¾ Ğ±Ñ‹Ñ‚ÑŒ:
   ```
   â˜€ï¸ Ğ”Ğ•ĞĞ¬ | Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: Ğ’ĞšĞ› | Ğ’Ğ¾ÑÑ…Ğ¾Ğ´: 06:45:00 | Ğ—Ğ°ĞºĞ°Ñ‚: 18:30:00
   ```

## ĞĞ²Ğ°Ñ€Ğ¸Ğ¹Ğ½Ñ‹Ğµ Ñ€ĞµĞ¶Ğ¸Ğ¼Ñ‹
- ĞŸÑ€Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ… Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ° Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ñ€ĞµĞ¶Ğ¸Ğ¼:
  - Ğ”ĞµĞ½ÑŒ: 6:00-18:00
  - ĞĞ¾Ñ‡ÑŒ: 18:00-6:00
- Ğ’ÑĞµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ÑÑ‚ÑÑ Ğ² Ğ»Ğ¾Ğ³ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

## Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹
- Ğ”Ğ»Ñ Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ÑÑ‚Ğ¸ ÑƒĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ² Google Maps)
- Ğ’Ñ‹ÑĞ¾Ñ‚Ñƒ Ğ¼ĞµÑÑ‚Ğ½Ğ¾ÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ Ğ½Ğ° [FreeMapTools](https://www.freemaptools.com/elevation-finder.htm)
- Ğ”Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ğ¼Ğ¸ ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ğ¼Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¸Ñ… ID Ğ² Ğ¼Ğ°ÑÑĞ¸Ğ²:
  ```javascript
  var devices = [
      { switchId: 130, charId: 15 }, // ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ²ĞµÑ‚
      { switchId: 131, charId: 15 }  // Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ ÑĞ²ĞµÑ‚
  ];
  ```

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹
```
[12:00] Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹...
[12:00] Ğ¢ĞµÑÑ‚ Ñ€Ğ°ÑÑ‡ĞµÑ‚Ğ°: Ğ’Ğ¾ÑÑ…Ğ¾Ğ´ 06:45:00, Ğ—Ğ°ĞºĞ°Ñ‚ 18:30:00
[12:00] â˜€ï¸ Ğ”Ğ•ĞĞ¬ | Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: Ğ’ĞšĞ› | Ğ’Ğ¾ÑÑ…Ğ¾Ğ´: 06:45:00 | Ğ—Ğ°ĞºĞ°Ñ‚: 18:30:00
[18:31] ğŸŒ™ ĞĞĞ§Ğ¬ | Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ: Ğ’Ğ«ĞšĞ› | Ğ’Ğ¾ÑÑ…Ğ¾Ğ´: 06:45:00 | Ğ—Ğ°ĞºĞ°Ñ‚: 18:30:00
```
