{
  "scenarioTemplate": {
    "name": "Восход - Закат (проверка при старте системы) ",
    "desc": "Резервная проверка Восхода - Заката (при старте хаба)\n\nЧто делает:\n\nУправляет выключателем (день - ночь)\nУчитывает точные координаты и высоту над морем\nНастройки:\n\nglobal.LAT = 4,17521;     // Широта (из Google Maps)  \nglobal.LNG = 73,5092;     // Долгота  \nglobal.ELEVATION = 17; // Высота (метры)  \nSWITCH_ID = 130;        // ID устройства  \n\nКак работает:\n\nСчитает восход/закат для вашего места\nКорректирует время с учётом высоты\nПереключает свет без вашего участия\nЕсли сломается:\n\nАвтоматически перейдёт на режим 6:00–18:00\nСообщит об ошибке в логах\nТест:\nglobal.testSunCalc() – покажет время рассвета и текущий режим (день/ночь)\n\n",
    "active": true,
    "onStart": true,
    "sync": false,
    "data": "{\"targets\":[{\"type\":\"code\",\"code\":\"// Конфигурация для проверки при старте системы:\\nvar SWITCH_ID = 8;    // ID виртуального выключателя\\nvar CHAR_ID = 15;       // ID характеристики On/Off\\n\\n// Получаем данные о солнце\\nvar sunData = global.calculateSunTimes();\\nvar isDayTime = sunData.isDayTime();\\n\\n// Управляем выключателем\\ntry {\\n    Hub.setCharacteristicValue(SWITCH_ID, CHAR_ID, isDayTime ? 1 : 0);\\n    \\n    // Логируем\\n    log.info(\\n        (isDayTime ? \\\"☀️ ДЕНЬ \\\" : \\\"🌙 НОЧЬ \\\") +\\n        \\\"| Состояние: \\\" + (isDayTime ? \\\"ВКЛ\\\" : \\\"ВЫКЛ\\\") +\\n        \\\" | Восход: \\\" + sunData.sunrise + \\n        \\\" | Закат: \\\" + sunData.sunset\\n    );\\n} catch(e) {\\n    log.error(\\\"Ошибка управления: \\\" + e);\\n    \\n    // Аварийное значение\\n    var defaultState = (new Date().getHours() >= 6 && new Date().getHours() < 18);\\n    Hub.setCharacteristicValue(SWITCH_ID, CHAR_ID, defaultState ? 1 : 0);\\n}\\n\"}]}",
    "type": "BLOCK"
  }
}